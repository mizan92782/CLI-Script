#!/bin/bash

# =========================================
# User & Group Management Helper (Linux)
# =========================================

help() {
cat << 'EOF'

=============== USER & GROUP MANAGEMENT CHEAT SHEET ===============

ðŸ”¹ LIST USERS & GROUPS
------------------------------------------------------------

# List all users
cat /etc/passwd

# List only usernames
cut -d: -f1 /etc/passwd

# List all groups
cat /etc/group

# List only group names
cut -d: -f1 /etc/group

# Show groups of a specific user
groups username

------------------------------------------------------------

ðŸ”¹ ADD USERS
------------------------------------------------------------

# Add a new user
sudo adduser username
# This will also prompt to set password and create home folder

# Add user without home directory
sudo useradd -M username

# Add user with specific home directory
sudo useradd -d /home/customfolder username

# Add user with specific shell
sudo useradd -s /bin/bash username

------------------------------------------------------------

ðŸ”¹ DELETE USERS
------------------------------------------------------------

# Delete user but keep home directory
sudo deluser username

# Delete user and home directory
sudo deluser --remove-home username

# Force remove user and all files owned by them
sudo deluser --remove-all-files username

------------------------------------------------------------

ðŸ”¹ MODIFY USERS
------------------------------------------------------------

# Change user password
sudo passwd username

# Add user to a group
sudo usermod -aG groupname username

# Change user's primary group
sudo usermod -g groupname username

# Change username
sudo usermod -l newname oldname

# Change home directory
sudo usermod -d /new/home/dir username

------------------------------------------------------------

ðŸ”¹ ADD GROUPS
------------------------------------------------------------

# Add new group
sudo addgroup groupname

# Add existing user to new group
sudo usermod -aG groupname username

------------------------------------------------------------

ðŸ”¹ DELETE GROUPS
------------------------------------------------------------

# Delete group
sudo delgroup groupname

# Delete group and remove user from it
sudo delgroup groupname username

------------------------------------------------------------

ðŸ”¹ CHECK GROUP MEMBERS
------------------------------------------------------------

# List members of a group
getent group groupname

# Show groups for a user
groups username

------------------------------------------------------------

ðŸ”¹ LOGIN & SHELL RELATED
------------------------------------------------------------

# Switch user
su - username

# Switch user and execute a command
su - username -c "command"

# Show current user
whoami

# Show logged-in users
who
w

# Show last login of users
lastlog

------------------------------------------------------------

ðŸ”¹ QUICK TIPS
------------------------------------------------------------

âœ” adduser â†’ interactive, recommended  
âœ” useradd â†’ manual, needs options  
âœ” deluser/delgroup â†’ remove safely  
âœ” usermod -aG â†’ always append to group, donâ€™t forget -a  
âœ” /etc/passwd â†’ stores user info  
âœ” /etc/group â†’ stores group info

===============================================================

EOF
}

# Auto show help
help
